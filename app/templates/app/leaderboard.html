<!DOCTYPE html>
<html lang="en">
    <head>
       {% load static %}
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Lakshya CTF</title>
        
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        
        <link rel="stylesheet" href="{% static 'app/css/all.css' %}" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/">
        <link rel="stylesheet" href="{% static 'app/css/bootstrap4-neon-glow.min.css' %}">

        <link rel='stylesheet' href="{% static 'app/css/hack.min.css' %}">
        
        <link rel="stylesheet" href="{% static 'app/css/main.css' %}">


    </head>
    <body class="imgloaded">
        <div class="glitch">
            <div class="glitch__img glitch__img_leaderboard"></div>
            <div class="glitch__img glitch__img_leaderboard"></div>
            <div class="glitch__img glitch__img_leaderboard"></div>
            <div class="glitch__img glitch__img_leaderboard"></div>
            <div class="glitch__img glitch__img_leaderboard"></div>
        </div>
        <div class="navbar-dark text-white">
            <div class="container">
                <nav class="navbar px-0 navbar-expand-lg navbar-dark">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                        <div class="navbar-nav">
                            <a href="/" class="pl-md-0 p-3 text-decoration-none text-light">
                                <h3 class="bold"><span class="color_danger">LAKSHYA</span><span class="color_white">CTF</span></h3>
                            </a>
                        </div>
                        <div class="navbar-nav ml-auto">
                            <a href="/" class="p-3 text-decoration-none text-light bold">Home</a>
                            <a href="/about" class="p-3 text-decoration-none text-light bold">About</a>
                            <a href="/quest" class="p-3 text-decoration-none text-light bold">Challenges</a>
                            <a href="/login" class="p-3 text-decoration-none text-light bold">Login</a>
                            <a href="/register" class="p-3 text-decoration-none text-light bold">Register</a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
        <div class="jumbotron bg-transparent mb-0 pt-3 radius-0">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <h1 class="display-1 bold color_white content__title text-center"><span class="color_danger">LEADER</span>BOARD<span class="vim-caret">&nbsp;</span></h1>
                        <p class="text-grey lead text-spacey text-center hackerFont">
                            Where you get ranked!
                        </p>
                        <div class="row justify-content-center my-5">
                            <div class="col-xl-10">
                                <canvas id="myChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-5  justify-content-center">
                    <div class="col-xl-10">
                        <table class="table table-hover table-striped">
                            <thead class="thead-dark hackerFont">
                                <tr>
                                    <th>#</th>
                                    <th>Team Name</th>
                                    <th>Points</th>
                                    <th>Time Taken</th>
                                </tr>
                            </thead>
                            {% for rank,team in leaderboard %}
                                <tbody>
                                    <tr>
                                        <th scope="row">{{ rank }}</th>
                                        <td>{{ team.username }}</td>
                                        <td>{{ team.points }}</td>
                                        <td>{{ team.convert }}</td>
                                    </tr>
                                </tbody>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
         <script src="{% static 'app/js/jquery-3.4.1.min.js' %}" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="></script>
        <script src="{% static 'app/js/popper.min.js' %}" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"></script>

        
         <script src="{% static 'app/js/preloader.js' %}"></script>
        <script src="{% static 'app/js/moment.min.js' %}"></script>
        <script src="{% static 'app/js/chart.js' %}"></script>
      
        <script>

        var values = [];

        {% for username in usernames %}
            var data = [];
            {% for i in username.data %}
                data.push({x: '{{ i.convert }}', y: {{ i.points}} });
            {% endfor %}


            var s = {
            label: '{{ username.name }}',
            borderColor: '#'+(Math.random()*0xFFFFFF<<0).toString(16),
            steppedLine: true,
            data: data
            };
            
            values.push(s);

        {% endfor %}

        var ctx = document.getElementById('myChart').getContext('2d');
        var chart = new Chart(ctx, {
        type: 'line',
        data: {
        datasets: values
        },
        options: {
        scales: {
        yAxes: [{
        type: 'linear'
        }],
        xAxes: [{
        type: 'time',
        distribution: 'series', // or linear
        time: {
        unit: 'minute',
        displayFormats: {
        minute: 'mm:ss'
        },
        tooltipFormat: 'mm:ss'
        }
        }]
        }
        }
        });
        </script>
    </body>
</html>